(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{177:function(e,n){},178:function(e,n,t){var content=t(548);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,t(46).default)("36873827",content,!0,{sourceMap:!1})},547:function(e,n,t){"use strict";var o=t(178);t.n(o).a},548:function(e,n,t){(e.exports=t(45)(!1)).push([e.i,".center{width:500px;margin:100px auto auto}",""])},549:function(e,n,t){"use strict";t.r(n);var o={props:{title:{type:String,required:!0},icon:{type:String,required:!0}}},r=t(23),l=Object(r.a)(o,function(){var e=this.$createElement,n=this._self._c||e;return n("div",{staticClass:"column"},[n("div",{staticClass:"card"},[n("header",{staticClass:"card-header"},[n("p",{staticClass:"card-header-title has-text-grey"},[this._v("\n        "+this._s(this.title)+"\n      ")])]),this._v(" "),n("div",{staticClass:"card-content"},[n("div",{staticClass:"content has-text-centered"},[n("b-icon",{attrs:{icon:this.icon,size:"is-large",type:"is-primary"}})],1)]),this._v(" "),n("footer",{staticClass:"card-footer"},[n("div",{staticClass:"card-footer-item"},[n("span",[this._t("default")],2)])])])])},[],!1,null,null,null).exports,c=(t(62),t(96),t(97),t(200)),d=t.n(c),h={roleArn:"arn:aws:iam::102033571354:role/lsDevs",region:"ap-southeast-1",apiGatewayUrl:"https://74ulfqmpd8.execute-api.ap-southeast-1.amazonaws.com",apiGatewayPath:"/prod"};function m(e){var n=new d.a.STS,t={RoleArn:h.roleArn,RoleSessionName:"AssumeRoleSession",WebIdentityToken:e};return new Promise(function(e,o){n.assumeRoleWithWebIdentity(t,function(n,data){n?o(n):(console.log("STS credentials: "+JSON.stringify(data.Credentials)),e(data))})})}function f(data){d.a.config.credentials=new d.a.Credentials(data.Credentials.AccessKeyId,data.Credentials.SecretAccessKey,data.Credentials.SessionToken),d.a.config.region=h.region;var e={sessionId:data.Credentials.AccessKeyId,sessionKey:data.Credentials.SecretAccessKey,sessionToken:data.Credentials.SessionToken};return new Promise(function(n){n(e)})}function v(e){h.apiGatewayUrl,h.apiGatewayPath;var n=new d.a.HttpRequest(h.apiGatewayUrl,h.region);n.method="POST",n.path=h.apiGatewayPath,n.body=JSON.stringify(e),n.headers.Host=n.endpoint.host;var t=new d.a.Signers.V4(n,"execute-api");return t.addAuthorization(d.a.config.credentials,d.a.util.date.getDate()),new Promise(function(e){e(t.request)})}function w(e){return new Promise(function(n,t){d.a.util.defer(function(){var data="";d.a.HttpClient.getInstance().handleRequest(e,{},function(e){e.on("data",function(e){data+=e.toString()}),e.on("end",function(){console.log("Sign-in token from Lambda: "+data),n(data)})},t)})})}function y(data){var e=JSON.parse(data),n="?Action=login";n+="&Issuer=Example.org",n+="&Destination="+encodeURIComponent("https://console.aws.amazon.com/");var t="https://signin.aws.amazon.com/federation"+(n+="&SigninToken="+e.SigninToken);window.location.replace(t)}var S={authenticate:function(e){return function(e){var n=e.getBasicProfile();console.log("Google ID: "+n.getId());var t=e.getAuthResponse().id_token;return console.log("Google ID Token: "+t),new Promise(function(e){e(t)})}(e).then(m).then(f).then(v).then(w).then(y)},updateRole:function(e){h.roleArn=e,console.log(h)}},C={name:"HomePage",components:{Card:l},data:function(){return{error:!1,message:"",isLoading:!1,selectedRole:"arn:aws:iam::102033571354:role/lsDevs",roles:[{role:"arn:aws:iam::102033571354:role/lsCloudwatch",name:"Logs and Monitoring"},{role:"arn:aws:iam::102033571354:role/lsBasicRead",name:"Read Only Access"},{role:"arn:aws:iam::102033571354:role/lsDevsBasic",name:"Developer Basic"},{role:"arn:aws:iam::102033571354:role/lsDevs",name:"Developer Advanced"},{role:"arn:aws:iam::102033571354:role/lsLeadsBasic",name:"Lead Basic"},{role:"arn:aws:iam::102033571354:role/lsLeadsAdvanced",name:"Lead Advanced"},{role:"arn:aws:iam::102033571354:role/lsDatabaseAdmin",name:"Data Team"}]}},methods:{roleSelected:function(e){S.updateRole(e)},openLoading:function(){this.isLoading=!0},closeLoading:function(){this.isLoading=!1},danger:function(e){this.$toast.open({duration:5e3,message:e,position:"is-top",type:"is-danger"})},handleClickSignIn:function(){var e=this;this.openLoading();var n=this;this.$gAuth.signIn().then(function(t){console.log("user",t),e.isSignIn=e.$gAuth.isAuthorized,S.authenticate(t).catch(function(e){console.log(e),n.error=!0,n.message="We are unable to authenticate you, Ensure you have chosen the role given to you, or reach to tech@livspace.com",n.danger(n.message),n.closeLoading()})}).catch(function(t){console.log(t),n.error=!0,n.message="We are unable to authenticate you, reach to tech@livspace.com",n.danger(n.message),e.closeLoading()})}},mounted:function(){var e=this,n=setInterval(function(){e.isInit=e.$gAuth.isInit,e.isSignIn=e.$gAuth.isAuthorized,e.isInit&&clearInterval(n)},1e3)}},A=(t(547),Object(r.a)(C,function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("section",{staticClass:"section"},[t("b-loading",{attrs:{"is-full-page":!0,active:e.isLoading,"can-cancel":!1},on:{"update:active":function(n){e.isLoading=n}}}),e._v(" "),t("div",{},[t("b-message",{staticClass:"center",attrs:{title:"Please sign in",type:"is-info",size:"is-medium",closable:!1}},[t("div",[e._v("Please signin using your livspace account")]),e._v(" "),t("br"),e._v(" "),t("b-select",{attrs:{placeholder:"Choose the Role Given to you",expanded:""},on:{input:e.roleSelected},model:{value:e.selectedRole,callback:function(n){e.selectedRole=n},expression:"selectedRole"}},e._l(e.roles,function(option){return t("option",{key:option.role,domProps:{value:option.role}},[e._v("\n              "+e._s(option.name)+"\n          ")])}),0),e._v(" "),t("br"),e._v(" "),t("a",{staticClass:"button is-large is-fullwidth",on:{click:e.handleClickSignIn}},[e._v("Google Sign In")])],1)],1)],1)},[],!1,null,null,null));n.default=A.exports}}]);